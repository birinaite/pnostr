const loader=document.getElementById("loader");const iElement=document.querySelector("[data-media]");const dataImg=JSON.parse(atob(getPostIdFromUrl()));loader.classList.remove("hidden");fetchControlFragments(dataImg.id,dataImg.relay).then(dataList=>{const blob=base64ToBlob(dataList);const mimeType=blob.type;if(mimeType.startsWith("image/")){const imageUrl=URL.createObjectURL(blob);const imgElement=document.createElement("img");imgElement.src=imageUrl;imgElement.alt="Imagem carregada dinamicamente";imgElement.addEventListener("click",()=>{navigator.clipboard.writeText(imgElement.src).then(()=>{alert("Endereço blob copiado para a área de transferência!")})["catch"](err=>{console.error("Falha ao copiar o endereço blob: ",err)})});iElement.appendChild(imgElement)}else if(mimeType==="application/pdf"){const pdfUrl=URL.createObjectURL(blob);const pdfElement=document.createElement("embed");pdfElement.src=pdfUrl;pdfElement.type="application/pdf";pdfElement.style.width="100vw";pdfElement.style.height="100vh";pdfElement.style.position="fixed";pdfElement.style.top="0";pdfElement.style.left="0";pdfElement.style.zIndex="9999";iElement.appendChild(pdfElement)}else if(mimeType.startsWith("audio/")){const audioUrl=URL.createObjectURL(blob);const audioElement=document.createElement("audio");audioElement.src=audioUrl;audioElement.controls=true;audioElement.autoplay=true;audioElement.alt="Áudio carregado dinamicamente";iElement.appendChild(audioElement)}else if(mimeType.startsWith("video/")){const videoUrl=URL.createObjectURL(blob);const videoContainer=document.createElement("div");videoContainer.classList.add("video-container");const videoElement=document.createElement("video");videoElement.src=videoUrl;videoElement.controls=true;videoElement.autoplay=true;videoContainer.appendChild(videoElement);document.body.appendChild(videoContainer)}else{console.error("Tipo de arquivo não suportado:",mimeType)}loader.classList.add("hidden")})["catch"](error=>{console.error("Erro ao carregar fragmentos:",error);loader.classList.add("hidden")});
